@page "/addproduct"
@using Blazored.FluentValidation
@*@inject ILogger Logger*@
<h3>Edit Product</h3>
<EditForm Model="ProductModel"
          OnValidSubmit="HandleSumitForm" 
          OnInvalidSubmit="HandleInvalidSubmit">
    @*<DataAnnotationsValidator />*@
    <FluentValidationValidator/> 


    <div class="form-group mx-sm-3 mb-2">
        <label for="Maker">Maker: &nbsp; </label>
        <InputText id="Maker" class="form-control"
                   placeholder="Maker Name" @bind-Value="ProductModel.Maker">Maker</InputText>
    </div>
    <div class="form-group mx-sm-3 mb-2">
        <label for="Title">Title : &nbsp; </label>
        <InputText id="Title" class="form-control"
                   placeholder="Title Name" @bind-Value="ProductModel.Title">Title</InputText>
    </div>
    <div class="form-group mx-sm-3 mb-2">
        <label for="Description">Description : &nbsp; </label>
        <InputText id="Description" class="form-control"
                   placeholder="Product Description" @bind-Value="ProductModel.Description">Title</InputText>
    </div>

    <ValidationSummary />
    <span class="bg-success">@Message </span>


    <button type="submit" class="btn btn-primary mb-2">
        Add Product
    </button>

</EditForm>
@code {

    private ProductViewModel ProductModel;
    private string Message;
    protected override void OnInitialized()
    {
        base.OnInitialized();
        ProductModel = new ProductViewModel();
        Log.Verbose("Initialized Add Product form");
    }
    protected void HandleSumitForm()
    {
        Message = "Successfully submitted.";
        Log.Information(Message);

        Console.WriteLine("Valid submit");
    }
    protected void HandleInvalidSubmit()
    {

        Log.Error("InValid submit : Client site validation got failed ");
    }

}
